<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AI Firewall Settings</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 36px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .toggle-group {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .toggle-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 12px;
            transition: background 0.2s;
        }

        .toggle-item:hover {
            background: #e9ecef;
        }

        .toggle-info {
            flex: 1;
        }

        .toggle-label {
            font-weight: 600;
            color: #333;
            font-size: 15px;
            display: block;
            margin-bottom: 4px;
        }

        .toggle-desc {
            color: #666;
            font-size: 13px;
        }

        .switch {
            position: relative;
            width: 50px;
            height: 28px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 28px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        input:checked + .slider:before {
            transform: translateX(22px);
        }

        .threshold-slider {
            margin: 20px 0;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
            color: #555;
        }

        .slider-value {
            font-weight: 600;
            color: #667eea;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            cursor: pointer;
            border: none;
        }

        .domain-list {
            max-height: 300px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 16px;
        }

        .domain-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .domain-name {
            font-family: monospace;
            font-size: 14px;
            color: #333;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }

        .remove-btn:hover {
            background: #c82333;
        }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 40px;
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #28a745;
            color: white;
            padding: 16px 24px;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.show {
            display: block;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 16px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
            color: #1976D2;
            line-height: 1.6;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 16px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
            color: #856404;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è AI Firewall Settings</h1>
            <p>Customize your content filtering preferences</p>
        </div>

        <!-- Master Toggle -->
        <div class="card">
            <div class="card-title">‚ö° Master Control</div>
            <div class="toggle-group">
                <div class="toggle-item">
                    <div class="toggle-info">
                        <span class="toggle-label">Enable AI Firewall</span>
                        <span class="toggle-desc">Turn on/off the entire extension</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="masterToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Category Filters -->
        <div class="card">
            <div class="card-title">üéØ Content Categories</div>
            <div class="card-description">
                Select which types of content to block. The AI will analyze images and block them based on these categories.
            </div>
            <div class="toggle-group">
                <div class="toggle-item">
                    <div class="toggle-info">
                        <span class="toggle-label">üîû NSFW Content</span>
                        <span class="toggle-desc">Adult and sexually explicit content</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="cat_nsfw">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toggle-item">
                    <div class="toggle-info">
                        <span class="toggle-label">‚öîÔ∏è Violence</span>
                        <span class="toggle-desc">Violent or aggressive imagery</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="cat_violence">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toggle-item">
                    <div class="toggle-info">
                        <span class="toggle-label">üî´ Weapons</span>
                        <span class="toggle-desc">Guns, knives, and other weapons</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="cat_weapons">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toggle-item">
                    <div class="toggle-info">
                        <span class="toggle-label">üíÄ Gore</span>
                        <span class="toggle-desc">Blood, injuries, and graphic content</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="cat_gore">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="toggle-item">
                    <div class="toggle-info">
                        <span class="toggle-label">üò± Disturbing Content</span>
                        <span class="toggle-desc">Scary or unsettling imagery</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="cat_disturbing">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="warning-box">
                ‚ö†Ô∏è <strong>Note:</strong> This extension uses MobileNet for object detection. 
                It can identify specific objects (weapons, vehicles, etc.) but has limited accuracy for adult content, violence, and gore. 
                For best results, use it to block specific objects or as a general content filter with custom settings.
            </div>
        </div>

        <!-- Sensitivity Settings -->
        <div class="card">
            <div class="card-title">‚öôÔ∏è Detection Sensitivity</div>
            <div class="card-description">
                Adjust how confident the AI needs to be before blocking content. Higher values = fewer false positives but might miss some content.
            </div>

            <div class="threshold-slider">
                <div class="slider-label">
                    <span>Confidence Threshold</span>
                    <span class="slider-value" id="confidenceValue">70%</span>
                </div>
                <input type="range" id="confidenceThreshold" min="50" max="95" value="70" step="5">
                <div style="display: flex; justify-content: space-between; font-size: 12px; color: #999; margin-top: 8px;">
                    <span>Permissive (50%)</span>
                    <span>Strict (95%)</span>
                </div>
            </div>

            <div class="info-box">
                üí° <strong>Recommended:</strong> 70% provides a good balance between accuracy and false positives.
                Lower values will block more content but may incorrectly block safe images.
            </div>
        </div>

        <!-- Whitelisted Domains -->
        <div class="card">
            <div class="card-title">‚ö™ Whitelisted Domains</div>
            <div class="card-description">
                Domains where the AI Firewall is disabled. Images on these sites will not be scanned or blurred.
            </div>
            <div class="domain-list" id="whitelistContainer">
                <div class="empty-state">No whitelisted domains</div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" id="saveBtn">üíæ Save Settings</button>
            <button class="btn btn-secondary" id="resetBtn">‚Ü∫ Reset to Defaults</button>
        </div>
    </div>

    <div class="toast" id="toast">Settings saved successfully!</div>

    <script src="js/storage.js"></script>
    <script src="options.js"></script>
</body>
</html>
